{{extend 'layout.html'}}

{{if 'title' in globals():}}
<h1 align="center">{{=title}}</h1>
{{pass}}


<div class="col-lg-6"
     style="background-color:white; margin: 0 auto 5px auto; box-shadow: 0 0 5px #a1a1a1; border-width: 10px; border-radius:5px;padding: 20px">
    <div>
        {{=repo}} : {{=path}}
        <hr>
        <div class="form_header row_buttons">
            <a class="button btn btn-default btn-secondary"
               href="{{=URL(c='svn', f='show_security', args=[repo, svn_encode(path)], user_signature=True)}}">
                <span class="icon arrowleft icon-arrow-left glyphicon glyphicon-arrow-left"></span>
                <span class="buttontext button" title="{{=T('Back')}}">{{=T('Back')}}</span>
            </a>
        </div>
        <hr>
        <form enctype="multipart/form-data" action="{{=action}}" method="post">
            <input value={{=repo}} type="hidden" name="repo"/>
            <input value={{=svn_encode(path)}} type="hidden" name="path"/>
            <div class="form-group row">
                <label class="form-control-label col-sm-3">{{=T('User/Group')}}</label>
                <div class="col-sm-9">
                    {{if 'account' in globals():}}
                    <select class="form-control" name="account">
                        <option value="{{=account}}">{{=account}}</option>
                    </select>
                    {{else:}}
                    <select class="form-control" name="account">
                        <option disabled="disabled">{{=T('Special')}}</option>
                        <option value="Everyone">Everyone</option>
                        <option disabled="disabled">{{=T('Users')}}</option>
                        {{for user in svn_get_users():}}
                        <option value="{{=user}}">{{=user}}</option>
                        {{pass}}
                        <option disabled="disabled">{{=T('Groups')}}</option>
                        {{for group in svn_get_groups():}}
                        <option value="{{=group}}">{{=group}}</option>
                        {{pass}}
                    </select>
                    {{pass}}
                    <span class="help-block"></span>
                </div>
            </div>
            <div class="form-group row">
                <label class="form-control-label col-sm-3">{{=T('Permission')}}</label>
                <div class="col-sm-9">
                    {{if 'permission' in globals():}}
                    <select class="form-control" name="permission">
                        <option value="0" {{if permission==0:}} selected="selected" {{pass}}>{{=T('No Access')}}</option>
                        <option value="1" {{if permission==1:}} selected="selected" {{pass}}>{{=T('Read Only')}}</option>
                        <option value="2" {{if permission==2:}} selected="selected" {{pass}}>{{=T('Read/Write')}}</option>
                    </select>
                    {{else:}}
                    <select class="form-control" name="permission">
                        <option value="0">{{=T('No Access')}}</option>
                        <option value="1">{{=T('Read Only')}}</option>
                        <option value="2" selected="selected">{{=T('Read/Write')}}</option>
                    </select>
                    {{pass}}
                    <span class="help-block"></span>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-3">
                    <input class="btn btn-primary" type="submit"/>
                </div>
            </div>
        </form>
    </div>
</div>